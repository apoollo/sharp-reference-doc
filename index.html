<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.15">
<title>Sharp 参考文档</title>
<link rel="stylesheet" href="css/site.css">
<script src="js/setup.js"></script><script defer src="js/site.js"></script>

</head>
<body class="article toc2 toc-left"><div id="banner-container" class="container" role="banner">
  <div id="banner" class="contained" role="banner">
    <div id="switch-theme">
      <input type="checkbox" id="switch-theme-checkbox" />
      <label for="switch-theme-checkbox">Dark Theme</label>
    </div>
  </div>
</div>
<div id="tocbar-container" class="container" role="navigation">
  <div id="tocbar" class="contained" role="navigation">
    <button id="toggle-toc"></button>
  </div>
</div>
<div id="main-container" class="container">
  <div id="main" class="contained">
    <div id="doc" class="doc">
<div id="header">
<h1>Sharp 参考文档</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_引导">1. 引导</a>
<ul class="sectlevel2">
<li><a href="#_背景">1.1. 背景</a></li>
<li><a href="#_介绍">1.2. 介绍</a></li>
</ul>
</li>
<li><a href="#_快速使用">2. 快速使用</a>
<ul class="sectlevel2">
<li><a href="#_输入">2.1. 输入</a>
<ul class="sectlevel3">
<li><a href="#_service_data_definition_languageddl">2.1.1. Service Data Definition Language(DDL)</a>
<ul class="sectlevel4">
<li><a href="#_设计你自己的业务库表">设计你自己的业务库表</a></li>
<li><a href="#_库表建议的命名规则">库表建议的命名规则</a></li>
</ul>
</li>
<li><a href="#_sharp_yaml_configurationsyc">2.1.2. Sharp YAML Configuration(SYC)</a></li>
<li><a href="#_在哪里执行">2.1.3. 在哪里执行</a></li>
</ul>
</li>
<li><a href="#_输出">2.2. 输出</a></li>
<li><a href="#_运行">2.3. 运行</a>
<ul class="sectlevel3">
<li><a href="#_系统要求">2.3.1. 系统要求</a></li>
<li><a href="#_启动">2.3.2. 启动</a></li>
</ul>
</li>
<li><a href="#_你获得了哪些可用能力">2.4. 你获得了哪些可用能力</a></li>
</ul>
</li>
<li><a href="#configuration-detail-header-bookmark">3. 高级配置</a></li>
<li><a href="#best-practice-header-bookmark">4. 最佳实践</a>
<ul class="sectlevel2">
<li><a href="#_高可用集成">4.1. 高可用集成</a></li>
<li><a href="#_开发集成">4.2. 开发集成</a></li>
<li><a href="#_网关">4.3. 网关</a></li>
</ul>
</li>
<li><a href="#team-contact">5. 团队</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_引导"><a class="anchor" href="#_引导"></a>1. 引导</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_背景"><a class="anchor" href="#_背景"></a>1.1. 背景</h3>
<div class="paragraph">
<p>企业级项目在架构，编码阶段总是会遇到以下问题:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>使用相似的技术架构，由于不同的人设计或者实现,产出了不同的架构细节， 比如依赖版本的不同，项目结构不同</p>
</li>
<li>
<p>大量通用的业务场景，同一个人在做重复的实现，繁重而无趣，比如通过数据库表搭建ORM，对外提供数据接口</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>apoollo团队为了解决这些问题，致力于寻求一种简单而通用的项目定义标准，并逐步实现了java版，命名为 <strong>apoollo sharp</strong> ，sharp 为 apoollo 团队在项目开节约了大量的开发时间与项目管理成本。您使用的sharp为内部衍生的开放版本，希望能够帮助到受此困扰的你。</p>
</div>
</div>
<div class="sect2">
<h3 id="_介绍"><a class="anchor" href="#_介绍"></a>1.2. 介绍</h3>
<div class="paragraph">
<p>Sharp 可帮助您创建可以运行的独立的、生产级的基于 <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/index.html">Spring Boot</a> 的应用程序。只需要很少的配置,即可体验Sharp带来的快感!</p>
</div>
<div class="paragraph">
<p>我们的目标是:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>为所有 Spring Boot 开发提供从根本上更快且可广泛访问的入门体验。</p>
</li>
<li>
<p>提供一系列大型项目通用的功能特性，更贴近真实业务</p>
</li>
<li>
<p>配置即程序，快速、安全、专业</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_快速使用"><a class="anchor" href="#_快速使用"></a>2. 快速使用</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO：基本工作流程
最佳实践参见<a href="#best-practice-header-bookmark">最佳实践</a></p>
</div>
<div class="sect2">
<h3 id="_输入"><a class="anchor" href="#_输入"></a>2.1. 输入</h3>
<div class="sect3">
<h4 id="_service_data_definition_languageddl"><a class="anchor" href="#_service_data_definition_languageddl"></a>2.1.1. Service Data Definition Language(DDL)</h4>
<div class="sect4">
<h5 id="_设计你自己的业务库表"><a class="anchor" href="#_设计你自己的业务库表"></a>设计你自己的业务库表</h5>
<div class="listingblock primary">
<div class="title">例如商品表：</div>
<div class="content">
<pre class="highlight"><code class="language-sql" data-lang="sql">CREATE TABLE `goods` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '商品ID',
  `order_id` bigint(40) NOT NULL COMMENT '订单ID',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Don&#8217;t forget&#8230;&#8203;这是例子，不要拿例子执行
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_库表建议的命名规则"><a class="anchor" href="#_库表建议的命名规则"></a>库表建议的命名规则</h5>
<div class="ulist">
<ul>
<li>
<p>表名称、字段名称多个单词使用下划线连接，例如 apoollo_order_goods</p>
</li>
<li>
<p>表名称结尾尽量不要使用api、controller、service、entity、feign 以及 java 关键字等特殊字符</p>
</li>
<li>
<p>创建者或者数据拥有者字段使用 owner</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sharp_yaml_configurationsyc"><a class="anchor" href="#_sharp_yaml_configurationsyc"></a>2.1.2. Sharp YAML Configuration(SYC)</h4>
<div class="paragraph">
<p>将.配置文件最简配置参数复制一份，修改成你自己的；其中 generateApiAutoBindService 的部分因为没有在线功能支持，暂时忽略；配置文件全部参考参数见 <a href="#configuration-detail-header-bookmark">高级配置</a></p>
</div>
<div class="listingblock primary">
<div class="title">配置文件最简配置参数</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">infomation:
  version: 0.0.1
  name: apoollo-oxylua-input
  description: 该配置文件,用于给用户展示如何定制Sharp配置文件,快速生成项目
  licenseName: APACHE LICENSE, VERSION 2.0
  licenseUrl: https://www.apache.org/licenses/LICENSE-2.0.html
  concatName: liuyulong6
  concatEmail: apoollo.liu.6@outlook.com
  concatUrl: https://apoollo.com
projectCompose:
  basePackageName: com.apoollo.oxylua
  version: 0.0.1-SNAPSHOT-10000
  groupId: com.apoollo
  baseArtifactId: apoollo-oxylua
generateApiAutoBindService:
  fromDatabaseConnection:
    - 
      databaseType: mysql
      domain: 127.0.0.1
      port: 3306
      username: root
      password: 123456
      deleteStarts: wx,apoollo,as_,spring,gw_
      deleteSplitors: _,-         </code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">配置文件全部参考参数</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">infomation:
  version: 0.0.1
  name: apoollo-oxylua-input
  description: 该配置文件,用于给用户展示如何定制Sharp配置文件,快速生成项目
  licenseName: APACHE LICENSE, VERSION 2.0
  licenseUrl: https://www.apache.org/licenses/LICENSE-2.0.html
  concatName: liuyulong6
  concatEmail: apoollo.liu.6@outlook.com
  concatUrl: https://apoollo.com
generateApiAutoBindService:
  fromDatabaseConnection:
  - username: root
    password: '123456'
    domain: 127.0.0.1
    port: 3306
    databaseType: mysql
    deleteStarts: wx,apoollo,as_,spring,gw_
    deleteSplitors: _,-
    includes:
    - catalog: solomon_api
      tableNames:
      - wx_activity
      - app
      - brand
    excludes:
    - catalog: solomon_api
      tableNames:
      - api
      - charge
      - demand
      - brand
    configs:
    - catalog: solomon_api
      tables:
      - className: Jd618Activity
        classComment: 京东618活动
        formChineseName: 京东618活动
        formEnglishName: Jd 618 Activity
        tableName: wx_activity
        columns:
        - propertyClassName: Bigdecimal
          propertyComment: 活动价格
          propertyLength: 100
          propertyIsOwner: false
          formEnable: true
          formChineseName: 活动价格
          formEnglishName: price
          columnName: price
declareApiManualBindAService:
  apis:
  - id: applicationGlobal
    name: 应用服务任务执行器
    description: 用于立即执行应用任务
    path: /application/global
    operations:
    - id: executeSpringBootApplication
      name: 执行spring boot 应用
      description: 用户执行spring boot 应用
      request:
        id: executeSpringBootApplicationRequest
        paths:
        - execute/spring/boot/application
        headers:
          Content-Type: application/json
        mehtods:
        - POST
        - GET
        contentTypes:
        - application/json
        inPath:
          required: true
          properties:
          - variableName: targetType
            className: Integer
            validators:
            - name: Min
              properties:
                value: '1'
        inHeader:
          required: true
          properties:
          - variableName: targetType
            className: Integer
            validators:
            - name: Min
              properties:
                value: '1'
        inQuery:
          required: true
          properties:
          - variableName: targetType
            className: Integer
            validators:
            - name: Min
              properties:
                value: '1'
        inCookie:
          required: true
          properties:
          - variableName: targetType
            className: Integer
            validators:
            - name: Min
              properties:
                value: '1'
        inBody:
          required: true
          properties:
          - variableName: targetType
            className: Integer
            validators:
            - name: Min
              properties:
                value: '1'
        enableRequestComposeMethod: OVERRIDE_HTTP_REUQEST
        enableRequestGeneric: PAGEABLE
        enablePrivacyRequest: true
      response:
        contentTypes:
        - application/json
        enableResponseGeneric: PAGEABLE
    bindServicePackageClassName: com.apoollo.oxylua.service.extentions.ApplicationGlobalTaskExecutionService
projectCompose:
  version: 0.0.1-SNAPSHOT-10000
  groupId: com.apoollo
  baseArtifactId: apoollo-oxylua
  basePackageName: com.apoollo.oxylua
  config:
    dependencies:
      enableExistsDependency: true
      pom:
        modelVersion: 4.0.0
        groupId: com.apoollo
        artifactId: apoollo-dependencies
        version: 1.0-SNAPSHOT
        packaging: pom
        name: apoollo-oxylua-dependencies
        url: https://apoollo.com
    parent:
      enableExistsDependency: false
      pom:
        modelVersion: 4.0.0
        groupId: com.apoollo
        artifactId: apoollo-oxylua-parent
        version: 1.0-SNAPSHOT
        packaging: jar
        name: apoollo-oxylua-parent
        url: https://apoollo.com
    client:
      enableExistsDependency: false
      pom:
        modelVersion: 4.0.0
        groupId: com.apoollo
        artifactId: apoollo-oxylua-client
        version: 1.0-SNAPSHOT
        packaging: jar
        name: apoollo-oxylua-client
        url: https://apoollo.com
    feginClient:
      enableExistsDependency: false
      pom:
        modelVersion: 4.0.0
        groupId: com.apoollo
        artifactId: apoollo-oxylua-feign-client
        version: 1.0-SNAPSHOT
        packaging: jar
        name: apoollo-oxylua-feign-client
        url: https://apoollo.com
    service:
      enableExistsDependency: false
      pom:
        modelVersion: 4.0.0
        groupId: com.apoollo
        artifactId: apoollo-oxylua-controller
        version: 1.0-SNAPSHOT
        packaging: jar
        name: apoollo-oxylua-controller
        url: https://apoollo.com
    controller:
      enableExistsDependency: false
      pom:
        modelVersion: 4.0.0
        groupId: com.apoollo
        artifactId: apoollo-oxylua-service
        version: 1.0-SNAPSHOT
        packaging: jar
        name: apoollo-oxylua-service
        url: https://apoollo.com
    server:
      enableExistsDependency: false
      pom:
        modelVersion: 4.0.0
        groupId: com.apoollo
        artifactId: apoollo-oxylua-server
        version: 1.0-SNAPSHOT
        packaging: jar
        name: apoollo-oxylua-server
        url: https://apoollo.com
      applicationYamlConfig:
        debug: 'true'
        spring:
          application:
            name: apoollo-oxylua-server
      applicationAutoYamlConfig:
        debug: 'true'
        spring:
          application:
            name: apoollo-oxylua-server</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_在哪里执行"><a class="anchor" href="#_在哪里执行"></a>2.1.3. 在哪里执行</h4>
<div class="paragraph">
<p>目前在线网站还没有建立起来，只能通过邮件的方式，发送给<a href="#team-contact">apoollo团队</a>；需要你提供DDL 与 SYC</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_输出"><a class="anchor" href="#_输出"></a>2.2. 输出</h3>
<div class="imageblock">
<div class="content">
<img src="img/program.png" alt="项目列表">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>oxylua-global-dependencies 所有项目的依赖的项目版本定义</p>
</li>
<li>
<p>oxylua 父项目</p>
</li>
<li>
<p>oxylua-client 客户端子项目，主要用于其他项目提供依赖</p>
</li>
<li>
<p>oxylua-controller  对外接口暴露子项目</p>
</li>
<li>
<p>oxylua-feign-client 对内接口暴露子项目</p>
</li>
<li>
<p>oxylua-server 服务入口子项目</p>
</li>
<li>
<p>oxylua-service 业务实现子项目</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_运行"><a class="anchor" href="#_运行"></a>2.3. 运行</h3>
<div class="sect3">
<h4 id="_系统要求"><a class="anchor" href="#_系统要求"></a>2.3.1. 系统要求</h4>
<div class="paragraph">
<p>Sharp 产出项目中依赖的开源项目版本参考以下列表</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">项目名称</th>
<th class="tableblock halign-left valign-top">版本</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.8+</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MAVEN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.5+</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.7+</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_启动"><a class="anchor" href="#_启动"></a>2.3.2. 启动</h4>
<div class="paragraph">
<p>找到oxylua-server项目，进入根目录执行 mvn spring-boot:run
参考Spring boot <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started.html#getting-started.first-application.run">启动</a></p>
</div>
<div class="paragraph">
<p>也可将所有项目导入到IDE中，直接运行</p>
</div>
<div class="paragraph">
<p>正常启动后可访问接口列表：http://127.0.0.1:9527/${项目名称}/swagger-ui/index.html，当前的用例的项目名称为oxylua-server</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/swagger-interfaces.png" alt="Swagger接口文档列表">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_你获得了哪些可用能力"><a class="anchor" href="#_你获得了哪些可用能力"></a>2.4. 你获得了哪些可用能力</h3>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> 每张表对外暴露接口(controller)14个，公有访问7个，私有访问7个</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 每张表对内暴露接口(feign)14个，公有访问7个，私有访问7个</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> jpa 对每张表的基础操作能力</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 高可用、可性能、高扩展项目架构，可集成Spring cloud Load Balance 协议的注册中心，网关等</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-detail-header-bookmark"><a class="anchor" href="#configuration-detail-header-bookmark"></a>3. 高级配置</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="configuration-detail-bookmark"></a> TODO</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="best-practice-header-bookmark"><a class="anchor" href="#best-practice-header-bookmark"></a>4. 最佳实践</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_高可用集成"><a class="anchor" href="#_高可用集成"></a>4.1. 高可用集成</h3>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect2">
<h3 id="_开发集成"><a class="anchor" href="#_开发集成"></a>4.2. 开发集成</h3>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect2">
<h3 id="_网关"><a class="anchor" href="#_网关"></a>4.3. 网关</h3>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="team-contact"><a class="anchor" href="#team-contact"></a>5. 团队</h2>
<div class="sectionbody">
<div class="paragraph">
<p>使用过程中有任何问题或者建议请联系：<a href="mailto:apoollo.liu.6@outlook.com">apoollo.liu.6@outlook.com</a></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-02-26 08:33:07 +0800
</div>
</div>
</div>
  </div>
</div>
</body>
</html>